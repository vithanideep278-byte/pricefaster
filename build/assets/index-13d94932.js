import{r as C,am as F,j as s,a$ as y}from"./index-c61e8b64.js";import{c as N,a as c,i as R,u as S,A as k,F as $,d as I,e as M,f as l,g as m,h as A}from"./index.esm-2f48c51a.js";import{B as p}from"./Button-fb2240eb.js";import{P as w}from"./PasswordInput-a91e7926.js";import"./context-ce67dbba.js";import"./index-edc40bad.js";import"./Input-02b0842b.js";import"./Views-4c7db57f.js";import"./isNil-4bf62b3e.js";import"./get-6536235b.js";import"./toString-66698047.js";const B=N().shape({password:c().required("Please enter your password"),confirmPassword:c().oneOf([R("password")],"Your passwords do not match")}),Y=u=>{const{disableSubmit:f=!1,className:h,signInUrl:x="/sign-in"}=u,[t,j]=C.useState(!1),[n,P]=S(),g=F(),b=async(a,e)=>{var i,d;const{password:o}=a;e(!0);try{(await y({password:o})).data&&(e(!1),j(!0))}catch(r){P(((d=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:d.message)||r.toString()),e(!1)}},v=()=>{g("/sign-in")};return s.jsxs("div",{className:h,children:[s.jsx("div",{className:"mb-6",children:t?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Reset done"}),s.jsx("p",{children:"Your password has been successfully reset"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Set new password"}),s.jsx("p",{children:"Your new password must different to previos password"})]})}),n&&s.jsx(k,{showIcon:!0,className:"mb-4",type:"danger",children:n}),s.jsx($,{initialValues:{password:"123Qwe1",confirmPassword:"123Qwe1"},validationSchema:B,onSubmit:(a,{setSubmitting:e})=>{f?e(!1):b(a,e)},children:({touched:a,errors:e,isSubmitting:o})=>s.jsx(I,{children:s.jsxs(M,{children:[t?s.jsx(p,{block:!0,variant:"solid",type:"button",onClick:v,children:"Continue"}):s.jsxs(s.Fragment,{children:[s.jsx(l,{label:"Password",invalid:e.password&&a.password,errorMessage:e.password,children:s.jsx(m,{autoComplete:"off",name:"password",placeholder:"Password",component:w})}),s.jsx(l,{label:"Confirm Password",invalid:e.confirmPassword&&a.confirmPassword,errorMessage:e.confirmPassword,children:s.jsx(m,{autoComplete:"off",name:"confirmPassword",placeholder:"Confirm Password",component:w})}),s.jsx(p,{block:!0,loading:o,variant:"solid",type:"submit",children:o?"Submiting...":"Submit"})]}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("span",{children:"Back to "}),s.jsx(A,{to:x,children:"Sign in"})]})]})})})]})},E=()=>s.jsx(Y,{disableSubmit:!1}),J=E;export{J as default};
