import{r as c,X as A,u as k,j as e,aJ as b,aK as j,ap as l,aq as d,ao as D}from"./index-c61e8b64.js";import{C as I}from"./Card-28ca2a97.js";import{B as v}from"./Button-fb2240eb.js";import{I as x}from"./Input-02b0842b.js";import{A as K}from"./index-fd6d2313.js";import{S as L}from"./Select-caf7af29.js";import"./context-ce67dbba.js";import"./Views-4c7db57f.js";import"./isNil-4bf62b3e.js";import"./get-6536235b.js";import"./toString-66698047.js";import"./warning-800900b9.js";import"./index-69d6aa2e.js";import"./index-edc40bad.js";import"./slicedToArray-519bc2fc.js";import"./objectWithoutProperties-82d8236c.js";const ie=()=>{const[o,N]=c.useState({firstName:"",lastName:"",phone:"",email:"",active:!0}),[h,y]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[z,T]=c.useState(null);A.useRef(null);const E=k(s=>s.auth.session.signedIn?s.auth.session.token:null),a=k(s=>s.auth.user),[F,B]=c.useState(!1),[P,O]=c.useState(!1),[_,R]=c.useState(!1),[M,C]=c.useState(!1),S=[{value:!0,label:"True"},{value:!1,label:"False"}];A.useEffect(()=>{N(s=>({...s,email:(a==null?void 0:a.email)||s.email,firstName:(a==null?void 0:a.first_name)||s.firstName,lastName:(a==null?void 0:a.last_name)||s.lastName,phone:(a==null?void 0:a.phone)||s.phone}))},[a]);const m=(s,r)=>{N(i=>({...i,[s]:r}))},g=(s,r)=>{y(i=>({...i,[s]:r}))},H=async()=>{var i,p,u,f;const s=a==null?void 0:a.id,r=typeof s=="string"||typeof s=="number"?s:void 0;if(!r){l.push(e.jsx(d,{type:"danger",duration:2500,title:"Error",children:"Missing user id. Please sign in again."}),{placement:"top-end"});return}try{const t={email:o.email,first_name:o.firstName,last_name:o.lastName,phone:o.phone,status:o.active,user_id:r},n=await D.fetchData({url:"/admin/users/edit",method:"post",data:t}),w=((i=n.data)==null?void 0:i.message)||((p=n.data)==null?void 0:p.msg)||"Profile updated successfully";l.push(e.jsx(d,{type:"success",duration:2500,title:"Success",children:w}),{placement:"top-end"})}catch(t){const n=((f=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:f.message)||(t==null?void 0:t.message)||"Failed to update profile";l.push(e.jsx(d,{type:"danger",duration:3e3,title:"Error",children:n}),{placement:"top-end"})}},q=async()=>{var i,p,u,f;const{newPassword:s,confirmPassword:r}=h;if(!s||!r){l.push(e.jsx(d,{type:"danger",duration:2500,title:"Error",children:"Please enter and confirm your new password"}),{placement:"top-end"});return}if(s!==r){l.push(e.jsx(d,{type:"danger",duration:2500,title:"Error",children:"Passwords do not match"}),{placement:"top-end"});return}if(!E){l.push(e.jsx(d,{type:"danger",duration:2500,title:"Error",children:"Missing auth token. Please sign in again."}),{placement:"top-end"});return}try{C(!0);const n=(await D.fetchData({url:`/v1/auth/reset-password/${E}`,method:"post",data:{password:s,confirmPassword:r}})).data,w=(n==null?void 0:n.message)||(n==null?void 0:n.msg)||"Password updated successfully";l.push(e.jsx(d,{type:"success",duration:2500,title:"Success",children:w}),{placement:"top-end"}),y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(t){const n=((p=(i=t==null?void 0:t.response)==null?void 0:i.data)==null?void 0:p.message)||((f=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:f.msg)||(t==null?void 0:t.message)||"Failed to update password";l.push(e.jsx(d,{type:"danger",duration:2500,title:"Error",children:n}),{placement:"top-end"})}finally{C(!1)}},J=()=>{console.log("Canceling changes")};return e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-4xl  space-y-6",children:[e.jsx(I,{className:"bg-white rounded-[24px] border-none",children:e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"text-[#4B5674] font-nunito text-[17px] not-italic font-bold leading-none mb-[18px]",children:"User Details"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{placeholder:"Enter your first name",value:o.firstName,onChange:s=>m("firstName",s.target.value),className:"w-full mt-[4px] rounded-[10px] border border-[#E3E3E3] bg-white shadow-[0_0_1px_1px_rgba(255,255,255,0)] text-[#727272] font-nunito text-[12px] font-medium focus:ring-[#2779FF] focus:border-[#2779FF]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{placeholder:"Enter your last name",value:o.lastName,onChange:s=>m("lastName",s.target.value),className:"w-full mt-[4px] rounded-[10px] border border-[#E3E3E3] bg-white shadow-[0_0_1px_1px_rgba(255,255,255,0)] text-[#727272] font-nunito text-[12px] font-medium focus:ring-[#2779FF] focus:border-[#2779FF]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{placeholder:"Enter your phone number",value:o.phone,onChange:s=>m("phone",s.target.value),className:"w-full mt-[4px] rounded-[10px] border border-[#E3E3E3] bg-white shadow-[0_0_1px_1px_rgba(255,255,255,0)] text-[#727272] font-nunito text-[12px] font-medium focus:ring-[#2779FF] focus:border-[#2779FF]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{placeholder:"Enter your email address",value:o.email,onChange:s=>m("email",s.target.value),disabled:!0,className:"w-full mt-[4px] rounded-[10px] border border-[#E3E3E3] bg-white shadow-[0_0_1px_1px_rgba(255,255,255,0)] text-[#727272] font-nunito text-[12px] font-medium focus:ring-[#2779FF] focus:border-[#2779FF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:"Active"}),e.jsx(L,{className:"w-full mt-[4px]",options:S,value:S.find(s=>s.value===o.active),onChange:s=>m("active",(s==null?void 0:s.value)??!0)})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"text-[#2E3A59] flex justify-center font-inter text-base font-medium",children:["Profile Image ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex justify-center space-y-4 mt-[6px]",children:e.jsx("div",{children:e.jsx(K,{size:120,shape:"circle",src:z||"/img/images/userproifelepageprofile.svg",className:"bg-gray-200"})})})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-7 border-gray-200",children:[e.jsx(v,{variant:"solid",size:"sm",onClick:J,className:"hover:bg-[#8080801A] active:bg-[#8080801A] rounded-[4px] !bg-[rgba(128,128,128,0.10)] !text-[#808080] text-center font-poppins text-[14px] not-italic font-medium leading-none px-[14px] py-[5px]",children:"Cancel"}),e.jsx(v,{variant:"solid",size:"sm",onClick:H,className:"hover:bg-[#4880FF] active:bg-[#4880FF] rounded-[4px] !bg-[#4880FF] !text-[#ffffff] text-center font-poppins text-[14px] not-italic font-medium leading-none px-[14px] py-[5px]",children:"Save"})]})]})}),e.jsx(I,{className:"bg-white rounded-[24px] border-none",children:e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"text-[#4B5674] font-nunito text-[17px] not-italic font-bold leading-none mb-[18px]",children:"Change Password"}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:"Current Password"}),e.jsx(x,{type:F?"text":"password",placeholder:"Enter your current password",value:h.currentPassword,onChange:s=>g("currentPassword",s.target.value),className:"w-full mt-[4px] rounded-[10px] border border-[#E3E3E3] bg-white shadow-[0_0_1px_1px_rgba(255,255,255,0)] text-[#727272] font-nunito text-[12px] font-medium focus:ring-[#2779FF] focus:border-[#2779FF]",suffix:e.jsx("button",{type:"button",onClick:()=>B(s=>!s),className:"text-gray-500 hover:text-gray-700",children:F?e.jsx(b,{}):e.jsx(j,{})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:"New Password"}),e.jsx(x,{type:P?"text":"password",placeholder:"Enter new password",value:h.newPassword,onChange:s=>g("newPassword",s.target.value),className:"w-full mt-[4px] rounded-[10px] border border-[#E3E3E3] bg-white shadow-[0_0_1px_1px_rgba(255,255,255,0)] text-[#727272] font-nunito text-[12px] font-medium focus:ring-[#2779FF] focus:border-[#2779FF]",suffix:e.jsx("button",{type:"button",onClick:()=>O(s=>!s),className:"text-gray-500 hover:text-gray-700",children:P?e.jsx(b,{}):e.jsx(j,{})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[#2E3A59] font-nunito text-base not-italic font-medium leading-none",children:"Confirm Password"}),e.jsx(x,{type:_?"text":"password",placeholder:"Confirm new password",value:h.confirmPassword,onChange:s=>g("confirmPassword",s.target.value),className:"w-full mt-[4px] rounded-[10px] border border-[#E3E3E3] bg-white shadow-[0_0_1px_1px_rgba(255,255,255,0)] text-[#727272] font-nunito text-[12px] font-medium focus:ring-[#2779FF] focus:border-[#2779FF]",suffix:e.jsx("button",{type:"button",onClick:()=>R(s=>!s),className:"text-gray-500 hover:text-gray-700",children:_?e.jsx(b,{}):e.jsx(j,{})})})]})]}),e.jsx("div",{className:"flex justify-end mt-8 ",children:e.jsx(v,{variant:"solid",size:"sm",onClick:q,loading:M,className:"hover:bg-[#4880FF] active:bg-[#4880FF] rounded-[4px] !bg-[#4880FF] !text-[#ffffff] text-center font-poppins text-[14px] not-italic font-medium leading-none px-[14px] py-[5px]",children:"Save"})})]})})]})})};export{ie as default};
