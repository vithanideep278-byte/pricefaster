import{j as t,r as c,ao as ie,ay as pe}from"./index-c61e8b64.js";import{B as C}from"./Button-fb2240eb.js";import{I as h}from"./Input-02b0842b.js";import{D as he}from"./Dialog-bacfacb3.js";import{D as xe}from"./DataTable-d852dcc0.js";import{S as ue}from"./SearchIcon-598e1613.js";import{e as ye,D as fe}from"./exportExcel-576478c7.js";import"./context-ce67dbba.js";import"./Views-4c7db57f.js";import"./isNil-4bf62b3e.js";import"./get-6536235b.js";import"./toString-66698047.js";import"./index-499f6fa2.js";import"./index-69d6aa2e.js";import"./warning-800900b9.js";import"./Select-caf7af29.js";import"./slicedToArray-519bc2fc.js";import"./objectWithoutProperties-82d8236c.js";import"./_getPrototype-d4ebae27.js";const be=({className:x="",size:f=20})=>t.jsxs("svg",{width:f,height:f,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:x,children:[t.jsx("g",{clipPath:"url(#clip0_115_225)",children:t.jsx("path",{d:"M11.6666 20C11.4863 20 11.3109 19.9415 11.1666 19.8333L7.83328 17.3333C7.72978 17.2557 7.64578 17.1551 7.58792 17.0393C7.53006 16.9236 7.49994 16.796 7.49994 16.6667V11.9833L1.65328 5.40583C1.23804 4.9374 0.966926 4.35901 0.87251 3.7402C0.778094 3.12138 0.864397 2.48846 1.12105 1.91751C1.37769 1.34656 1.79377 0.861882 2.31926 0.521721C2.84475 0.181561 3.4573 0.000395349 4.08328 0L15.9166 0C16.5425 0.000734209 17.1549 0.182199 17.6802 0.522589C18.2055 0.862978 18.6213 1.34781 18.8777 1.91882C19.134 2.48983 19.2201 3.12273 19.1254 3.74146C19.0308 4.36018 18.7595 4.93841 18.3441 5.40667L12.4999 11.9833V19.1667C12.4999 19.3877 12.4121 19.5996 12.2559 19.7559C12.0996 19.9122 11.8876 20 11.6666 20ZM9.16661 16.25L10.8333 17.5V11.6667C10.8334 11.4626 10.9085 11.2657 11.0441 11.1133L17.1008 4.29917C17.3027 4.0709 17.4345 3.7892 17.4803 3.48788C17.5261 3.18655 17.4839 2.87842 17.3589 2.60046C17.2339 2.32251 17.0313 2.08655 16.7754 1.92091C16.5196 1.75527 16.2214 1.66699 15.9166 1.66667H4.08328C3.77865 1.66713 3.48063 1.75546 3.22495 1.92105C2.96926 2.08665 2.76678 2.3225 2.64178 2.60029C2.51678 2.87809 2.47457 3.18605 2.52022 3.48723C2.56586 3.78842 2.69742 4.07004 2.89911 4.29833L8.95661 11.1133C9.09195 11.2659 9.16667 11.4627 9.16661 11.6667V16.25Z",fill:"currentColor"})}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_115_225",children:t.jsx("rect",{width:"20",height:"20",fill:"white"})})})]}),Ue=()=>{const[x,f]=c.useState(""),[P,y]=c.useState(!1),[n,u]=c.useState({minPrice:"",maxPrice:"",location:"",customerType:"",firstTrackedProperty:"",beds:"",baths:""}),[a,I]=c.useState({minPrice:"",maxPrice:"",location:"",customerType:"",firstTrackedProperty:"",beds:"",baths:""});c.useEffect(()=>(P?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[P]);const[K,D]=c.useState([]),[q,_]=c.useState(!1),[b,v]=c.useState(1),[S,M]=c.useState(10),[V,F]=c.useState(0),[i,$]=c.useState({key:"",order:""}),R=(e,o)=>{var s,p;const g=((p=(s=e==null?void 0:e.id)==null?void 0:s.toString)==null?void 0:p.call(s))||`${o}`,r=(e==null?void 0:e.user)||{},l=(e==null?void 0:e.subscription)||{};return{id:g,propertyName:(l==null?void 0:l.title)||"-",userName:[r==null?void 0:r.first_name,r==null?void 0:r.last_name].filter(Boolean).join(" ").trim()||(r==null?void 0:r.email)||"-",address:(r==null?void 0:r.country)||"-",price:(e==null?void 0:e.price)||"-",location:(r==null?void 0:r.country)||"-",customerType:(r==null?void 0:r.describe_yourself_option)||"-",firstTrackedProperty:(l==null?void 0:l.description)||"-",bed:"-",bath:"-"}},B=c.useCallback(async()=>{_(!0);try{const e=b<=1?0:b,o={search:x??"",min_price:a.minPrice!==""?Number(a.minPrice):null,max_price:a.maxPrice!==""?Number(a.maxPrice):null,city:a.location||null,property_type:a.firstTrackedProperty!==""?Number(a.firstTrackedProperty):null,bedrooms:a.beds!==""?Number(a.beds):null,bathrooms:a.baths!==""?Number(a.baths):null,sort:i.key||"created_at",sort_order:i.order?i.order.toUpperCase():"DESC",limit:S,offset:e},r=(await ie.fetchData({url:"/admin/properties/list",method:"post",data:o})).data;let l=[],s=0;if(r!=null&&r.data&&Array.isArray(r.data.data))l=r.data.data,s=r.data.total??l.length;else if(Array.isArray(r))l=r,s=r.length;else if(r!=null&&r.data){const d=r.data;l=d.rows||d.list||d.items||[],s=d.total??r.total??l.length}else l=(r==null?void 0:r.rows)||(r==null?void 0:r.list)||(r==null?void 0:r.items)||[],s=(r==null?void 0:r.total)??l.length;const p=l.map((d,T)=>R(d,T));D(p),F(typeof s=="number"?s:p.length)}catch{D([]),F(0)}finally{_(!1)}},[b,S,x,i,a]);c.useEffect(()=>{const e=setTimeout(()=>{B()},300);return()=>clearTimeout(e)},[B]);const H=[{header:"Property Name",accessorKey:"propertyName",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"",children:o.propertyName})})}},{header:"User Name",accessorKey:"userName",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.userName})}},{header:"Address",accessorKey:"address",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.address})}},{header:"Price",accessorKey:"price",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.price})}},{header:"Location",accessorKey:"location",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.location})}},{header:"Customer Type",accessorKey:"customerType",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.customerType})}},{header:"First Tracked Property",accessorKey:"firstTrackedProperty",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.firstTrackedProperty})}},{header:"Bed",accessorKey:"bed",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.bed})}},{header:"Bath",accessorKey:"bath",enableSorting:!0,cell:e=>{const o=e.row.original;return t.jsx("span",{className:"",children:o.bath})}}];return t.jsxs("div",{className:"min-h-screen w-full",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-3",children:[t.jsx("h1",{className:"text-[#202224] font-nunito text-[24px] font-bold leading-none tracking-[-0.114px]",children:"Property Tracking"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto sm:items-center",children:[t.jsxs("div",{className:"relative bg-white rounded-[35px] w-full sm:w-auto",children:[t.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),t.jsx(h,{type:"text",placeholder:"Search Users",value:x,onChange:e=>f(e.target.value),className:"pl-10 w-full sm:w-[253px] text-[#202224] font-normal text-[14px] leading-none font-nunito rounded-[19px] border border-[#D5D5D5] bg-white"})]}),t.jsxs("div",{className:"flex flex-row gap-2 w-full sm:w-auto justify-end",children:[t.jsx(C,{variant:"solid",size:"sm",className:"!bg-[#4880FF] text-white !rounded-[19px] !p-[9px]",onClick:()=>y(!0),children:t.jsx(be,{className:"w-5 h-5",size:20})}),t.jsxs(C,{variant:"solid",size:"sm",className:"flex items-center text-white text-center font-nunito text-[12px] font-bold px-[16px] py-[11px] !rounded-[19px] !bg-[#4880FF]",onClick:async()=>{await ye({endpoint:"/admin/properties/list",filename:"property-tracking.csv",basePayload:{search:x??"",min_price:a.minPrice!==""?Number(a.minPrice):null,max_price:a.maxPrice!==""?Number(a.maxPrice):null,city:a.location||null,property_type:a.firstTrackedProperty!==""?Number(a.firstTrackedProperty):null,bedrooms:a.beds!==""?Number(a.beds):null,bathrooms:a.baths!==""?Number(a.baths):null,sort:i.key||"created_at",sort_order:i.order?i.order.toUpperCase():"DESC"},limitPerPage:200,normalize:(e,o)=>{var m,A,w,L,N,z,j,E,k,U;const g=((A=(m=e==null?void 0:e.id)==null?void 0:m.toString)==null?void 0:A.call(m))||`${o}`,r=(e==null?void 0:e.user)||{},l=(e==null?void 0:e.subscription)||{},s=(l==null?void 0:l.title)||"-",p=[r==null?void 0:r.first_name,r==null?void 0:r.last_name].filter(Boolean).join(" ").trim()||(r==null?void 0:r.email)||"-",d=(r==null?void 0:r.email)||"-",T=(r==null?void 0:r.country)||"-",Z=((L=(w=e==null?void 0:e.price)==null?void 0:w.toString)==null?void 0:L.call(w))||(e==null?void 0:e.price)||"-",O=(e==null?void 0:e.currency)||"-",X=(r==null?void 0:r.country)||"-",Y=(r==null?void 0:r.city)||(e==null?void 0:e.city)||"-",G=(r==null?void 0:r.state)||(e==null?void 0:e.state)||"-",J=(r==null?void 0:r.country)||(e==null?void 0:e.country)||"-",Q=(r==null?void 0:r.describe_yourself_option)||"-",W=(l==null?void 0:l.description)||"-",ee="-",re="-",te=((e==null?void 0:e.bedrooms)??"").toString()||"-",ae=((e==null?void 0:e.bathrooms)??"").toString()||"-",oe=((z=(N=e==null?void 0:e.square_feet)==null?void 0:N.toString)==null?void 0:z.call(N))||((E=(j=e==null?void 0:e.sqft)==null?void 0:j.toString)==null?void 0:E.call(j))||(e==null?void 0:e.sqft)||"-",le=((U=(k=e==null?void 0:e.property_type)==null?void 0:k.toString)==null?void 0:U.call(k))||(e==null?void 0:e.property_type)||"-",ne=e!=null&&e.created_at?new Date(e.created_at).toLocaleString():"-",se=e!=null&&e.updated_at?new Date(e.updated_at).toLocaleString():"-",ce=e!=null&&e.last_tracked_at?new Date(e.last_tracked_at).toLocaleString():"-",de=(e==null?void 0:e.url)||(e==null?void 0:e.listing_url)||"-";return{id:g,propertyName:s,userName:p,userEmail:d,address:T,price:Z,currency:O,location:X,city:Y,state:G,country:J,customerType:Q,firstTrackedProperty:W,bed:ee,bath:re,bedrooms:te,bathrooms:ae,squareFeet:oe,propertyType:le,createdAt:ne,updatedAt:se,lastTrackedAt:ce,listingUrl:de}},columns:[{header:"Property ID",key:"id"},{header:"Property Name",key:"propertyName"},{header:"User Name",key:"userName"},{header:"User Email",key:"userEmail"},{header:"Address",key:"address"},{header:"Price",key:"price"},{header:"Currency",key:"currency"},{header:"Location",key:"location"},{header:"City",key:"city"},{header:"State",key:"state"},{header:"Country",key:"country"},{header:"Customer Type",key:"customerType"},{header:"First Tracked Property",key:"firstTrackedProperty"},{header:"Bed",key:"bed"},{header:"Bath",key:"bath"},{header:"Bedrooms",key:"bedrooms"},{header:"Bathrooms",key:"bathrooms"},{header:"Square Feet",key:"squareFeet"},{header:"Property Type",key:"propertyType"},{header:"Created At",key:"createdAt"},{header:"Updated At",key:"updatedAt"},{header:"Last Tracked At",key:"lastTrackedAt"},{header:"Listing URL",key:"listingUrl"}]})},children:["Download",t.jsx(fe,{className:"ml-2",size:16})]})]})]})]}),t.jsx("div",{className:"",children:t.jsx(xe,{columns:H,data:K,loading:q,onPaginationChange:e=>v(e),onSelectChange:e=>{M(e),v(1)},onSort:e=>$(e),pageSizes:[10,25,50],pagingData:{total:V,pageIndex:b,pageSize:S}})}),t.jsx(he,{isOpen:P,onRequestClose:()=>y(!1),width:500,closable:!1,contentClassName:"p-0 rounded-[24px] bg-white shadow-[0_10px_20px_0_rgba(18,38,63,0.03)] mx-[20px] my-[4rem]",children:t.jsxs("div",{className:"",children:[t.jsxs("div",{className:"flex justify-between items-center  px-4 py-4 border-b border-[#EFF2F7] ",children:[t.jsx("h2",{className:"text-[#495057] font-nunito text-[18px] font-medium leading-none",children:"Filter Your Data"}),t.jsx("button",{className:"absolute top-[0px] right-4 text-[30px] text-gray-400 hover:text-gray-600 transition-colors",onClick:()=>y(!1),children:t.jsx(pe,{className:"mt-[13px]",size:22})})]}),t.jsxs("div",{className:"space-y-6 px-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[#495057] font-nunito text-[16px] not-italic font-semibold leading-none mb-2",children:"Minimum Price"}),t.jsx(h,{type:"number",placeholder:"$00",value:n.minPrice,onChange:e=>u({...n,minPrice:e.target.value}),className:"w-full rounded-[19px] border-[0.6px] border-[#D5D5D5] bg-white placeholder:text-[#202224] placeholder:font-nunito placeholder:text-[14px] placeholder:not-italic placeholder:font-normal placeholder:leading-none placeholder:opacity-50"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[#495057] font-nunito text-[16px] not-italic font-semibold leading-none mb-2",children:"Maximum Price"}),t.jsx(h,{type:"number",placeholder:"$00",value:n.maxPrice,onChange:e=>u({...n,maxPrice:e.target.value}),className:"w-full rounded-[19px] border-[0.6px] border-[#D5D5D5] bg-white placeholder:text-[#202224] placeholder:font-nunito  placeholder:text-[14px] placeholder:not-italic placeholder:font-normal placeholder:leading-none placeholder:opacity-50"})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center mb-2",children:t.jsx("label",{className:"block text-[#495057] font-nunito text-[16px] not-italic font-semibold leading-none",children:"Location"})}),t.jsx(h,{type:"text",placeholder:"Enter location",value:n.location,onChange:e=>u({...n,location:e.target.value}),className:"w-full rounded-[19px] border-[0.6px] border-[#D5D5D5] bg-white placeholder:text-[#202224] placeholder:font-nunito placeholder:text-[14px] placeholder:not-italic placeholder:font-normal placeholder:leading-none placeholder:opacity-50"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center mb-2",children:t.jsx("label",{className:"block text-[#495057] font-nunito text-[16px] not-italic font-semibold leading-none",children:"First Tracked Property"})}),t.jsx(h,{type:"number",placeholder:"Enter first tracked property",value:n.firstTrackedProperty,onChange:e=>u({...n,firstTrackedProperty:e.target.value}),className:"w-full rounded-[19px] border-[0.6px] border-[#D5D5D5] bg-white placeholder:text-[#202224] placeholder:font-nunito placeholder:text-[14px] placeholder:not-italic placeholder:font-normal placeholder:leading-none placeholder:opacity-50"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[#495057] font-nunito text-[16px] not-italic font-semibold leading-none mb-2",children:"Numbers of Beds"}),t.jsx(h,{type:"number",placeholder:"00",value:n.beds,onChange:e=>u({...n,beds:e.target.value}),className:"w-full rounded-[19px] border-[0.6px] border-[#D5D5D5] bg-white placeholder:text-[#202224] placeholder:font-nunito placeholder:text-[14px] placeholder:not-italic placeholder:font-normal placeholder:leading-none placeholder:opacity-50"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[#495057] font-nunito text-[16px] not-italic font-semibold leading-none mb-2",children:"Numbers of Baths"}),t.jsx(h,{type:"number",placeholder:"00",value:n.baths,onChange:e=>u({...n,baths:e.target.value}),className:"w-full rounded-[19px] border-[0.6px] border-[#D5D5D5] bg-white placeholder:text-[#202224] placeholder:font-nunito  placeholder:text-[14px] placeholder:not-italic placeholder:font-normal placeholder:leading-none placeholder:opacity-50"})]})]}),t.jsxs("div",{className:"flex justify-center space-x-4 mt-8",children:[t.jsx(C,{variant:"solid",size:"sm",className:"!rounded-[24px] border !border-[#B6B6B6] !bg-[#B6B6B6] !text-[#353738] font-nunito text-[13px] not-italic font-medium leading-normal px-[34px] py-[7px]",onClick:()=>y(!1),children:"Cancel"}),t.jsx(C,{variant:"solid",size:"sm",className:"!rounded-[24px] border !border-[#4880FF] !bg-[#4880FF] text-white font-nunito text-[13px] not-italic font-medium leading-normal px-[34px] py-[7px]",onClick:()=>{I(n),v(1),y(!1)},children:"Continue"})]})]})]})})]})};export{Ue as default};
